{"ast":null,"code":"var _jsxFileName = \"/home/jaime/Documents/React_Feed-ReactCourse2020/src/components/Feed/Profile.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport NavFeed from './NavFeed';\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.likeHandler = index => {\n      let postsAux = [...this.state.myPosts];\n      const config = {\n        method: \"PUT\",\n        headers: {\n          'Content-type': 'Application/json',\n          authorization: `Bearer ${this.state.token}`\n        },\n        body: JSON.stringify(postsAux[index])\n      };\n      /* fetch('https://reactcourseapi.herokuapp.com/post/', config)\n          .then(res => {this.fetchData()}) */\n\n      fetch('https://reactcourseapi.herokuapp.com/post/like', config).then(res => {\n        this.fetchUserData();\n      });\n    };\n\n    this.fetchUserData = () => {\n      let config = {\n        method: \"GET\",\n        headers: {\n          'Content-type': 'Application/json',\n          authorization: `Bearer ${this.state.token}`\n        }\n      };\n      fetch('https://reactcourseapi.herokuapp.com/user/', config).then(res => res.json()).then(data => {\n        console.log(data.user.posts);\n        this.setState({\n          myPosts: data.user.posts || ''\n        });\n      });\n    };\n\n    this.fetchUsername = () => {\n      let config = {\n        method: \"GET\",\n        headers: {\n          'Content-type': 'Application/json',\n          authorization: `Bearer ${this.state.token}`\n        }\n      };\n      fetch('https://reactcourseapi.herokuapp.com/user/name', config).then(res => res.json()).then(data => {\n        this.setState({\n          username: data.username || ''\n        });\n      });\n    };\n\n    this.state = {\n      myPosts: [],\n      username: \"\",\n      token: localStorage.getItem('token')\n    };\n  }\n\n  componentDidMount() {\n    this.fetchUserData();\n    this.fetchUsername();\n  }\n\n  render() {\n    const myPostsComponents = this.state.myPosts.map();\n    return React.createElement(React.Fragment, null, React.createElement(NavFeed, {\n      username: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"display-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"ReactFeed\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"My Posts\"), React.createElement(\"div\", {\n      className: \"posts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Hola\"))));\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["/home/jaime/Documents/React_Feed-ReactCourse2020/src/components/Feed/Profile.js"],"names":["React","Component","withRouter","NavFeed","Profile","constructor","props","likeHandler","index","postsAux","state","myPosts","config","method","headers","authorization","token","body","JSON","stringify","fetch","then","res","fetchUserData","json","data","console","log","user","posts","setState","fetchUsername","username","localStorage","getItem","componentDidMount","render","myPostsComponents","map"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport {withRouter} from 'react-router-dom';\nimport NavFeed from './NavFeed';\n\nclass Profile extends Component{\n    constructor(props){\n        super(props);\n\n        this.state = {\n            myPosts : [],\n            username : \"\",\n            token : localStorage.getItem('token'),\n        }\n    }\n\n    likeHandler = index => {\n        let postsAux = [...this.state.myPosts];\n    \n        const config = {\n            method: \"PUT\",\n            headers: {\n                'Content-type': 'Application/json',\n                authorization: `Bearer ${this.state.token}`\n            },\n            body: JSON.stringify(postsAux[index])\n        }\n    \n        /* fetch('https://reactcourseapi.herokuapp.com/post/', config)\n            .then(res => {this.fetchData()}) */\n    \n            fetch('https://reactcourseapi.herokuapp.com/post/like', config)\n            .then(res => {this.fetchUserData()})\n            \n      }\n\n    fetchUserData = () => {\n        let config = {\n            method: \"GET\",\n            headers: {\n                'Content-type': 'Application/json',\n                authorization: `Bearer ${this.state.token}`\n            }\n        }\n\n        fetch('https://reactcourseapi.herokuapp.com/user/', config)\n            .then(res => res.json())\n            .then(data => {\n                console.log(data.user.posts);\n                this.setState({\n                    myPosts : data.user.posts || ''\n                })   \n            })\n    }\n\n    fetchUsername = () => {\n        let config = {\n            method: \"GET\",\n            headers: {\n                'Content-type': 'Application/json',\n                authorization: `Bearer ${this.state.token}`\n            }\n        }\n    \n        fetch('https://reactcourseapi.herokuapp.com/user/name', config)\n            .then(res => res.json())\n            .then(data => {\n                this.setState({\n                    username: data.username || ''\n                })\n    \n            })\n    }\n\n    componentDidMount(){\n        this.fetchUserData();\n        this.fetchUsername();\n    }\n\n    render(){\n\n        const myPostsComponents = this.state.myPosts.map()\n\n        return(\n            <>\n                <NavFeed username={this.state.username} />\n                <div className=\"container\">\n                    <h1 className=\"display-3\">ReactFeed</h1>\n                    <h2>My Posts</h2>\n\n                    <div className=\"posts\">\n                        <p>Hola</p>\n                    </div>\n                </div>\n            </>\n        );\n    }\n\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}