{"ast":null,"code":"var _jsxFileName = \"/home/jaime/Documents/React_Feed-ReactCourse2020/src/components/Feed/ReactFeed.js\";\nimport React, { Component } from 'react';\nimport Post from './Post';\nimport NavFeed from './NavFeed';\n\nclass ReactFeed extends Component {\n  constructor(props) {\n    super(props);\n\n    this.likeHandler = index => {\n      let postsAux = [...this.state.posts];\n      const config = {\n        method: \"PUT\",\n        headers: {\n          'Content-type': 'Application/json',\n          authorization: `Bearer ${this.state.token}`\n        },\n        body: JSON.stringify(postsAux[index])\n      };\n      /* fetch('https://reactcourseapi.herokuapp.com/post/', config)\n      \t.then(res => {this.fetchData()}) */\n\n      fetch('https://reactcourseapi.herokuapp.com/post/like', config).then(res => {\n        this.fetchData();\n      });\n    };\n\n    this.fetchData = () => {\n      let config = {\n        method: \"GET\",\n        headers: {\n          'Content-type': 'Application/json',\n          authorization: `Bearer ${this.state.token}`\n        }\n      };\n      fetch('https://reactcourseapi.herokuapp.com/post/', config).then(res => res.json()).then(data => {\n        console.log();\n        this.setState({\n          posts: data.filteredPosts || []\n        });\n      });\n    };\n\n    this.fetchUsername = () => {\n      let config = {\n        method: \"GET\",\n        headers: {\n          'Content-type': 'Application/json',\n          authorization: `Bearer ${this.state.token}`\n        }\n      };\n      fetch('https://reactcourseapi.herokuapp.com/user/name', config).then(res => res.json()).then(data => {\n        this.setState({\n          username: data.username || ''\n        });\n      });\n    };\n\n    this.state = {\n      posts: [],\n      username: '',\n      token: localStorage.getItem('token')\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n    this.fetchUsername();\n  }\n\n  render() {\n    const postsComponents = this.state.posts.map((post, index) => {\n      return React.createElement(Post, {\n        key: index,\n        name: post.user,\n        likes: post.likes,\n        title: post.title,\n        text: post.text,\n        image: post.image,\n        onClick: () => this.likeHandler(index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      });\n    });\n    return React.createElement(React.Fragment, null, React.createElement(NavFeed, {\n      username: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"display-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"ReactFeed\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Recent posts\"), React.createElement(\"div\", {\n      className: \"posts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, postsComponents)));\n  }\n\n}\n\nexport default ReactFeed;","map":{"version":3,"sources":["/home/jaime/Documents/React_Feed-ReactCourse2020/src/components/Feed/ReactFeed.js"],"names":["React","Component","Post","NavFeed","ReactFeed","constructor","props","likeHandler","index","postsAux","state","posts","config","method","headers","authorization","token","body","JSON","stringify","fetch","then","res","fetchData","json","data","console","log","setState","filteredPosts","fetchUsername","username","localStorage","getItem","componentDidMount","render","postsComponents","map","post","user","likes","title","text","image"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Post from './Post'\nimport NavFeed from './NavFeed'\n\nclass ReactFeed extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n\t  posts: [],\n\t  username:'',\n\t  token: localStorage.getItem('token')\n    }\n  }\n\n\n\n  likeHandler = index => {\n    let postsAux = [...this.state.posts];\n\n\tconst config = {\n\t\tmethod: \"PUT\",\n\t\theaders: {\n\t\t\t'Content-type': 'Application/json',\n\t\t\tauthorization: `Bearer ${this.state.token}`\n\t\t},\n\t\tbody: JSON.stringify(postsAux[index])\n\t}\n\n\t/* fetch('https://reactcourseapi.herokuapp.com/post/', config)\n\t\t.then(res => {this.fetchData()}) */\n\n\t\tfetch('https://reactcourseapi.herokuapp.com/post/like', config)\n\t\t.then(res => {this.fetchData()})\n\t\t\n  }\n\n  fetchData = () => {\n\tlet config = {\n\t\tmethod: \"GET\",\n\t\theaders: {\n\t\t\t'Content-type': 'Application/json',\n\t\t\tauthorization: `Bearer ${this.state.token}`\n\t\t}\n\t}\n\n\tfetch('https://reactcourseapi.herokuapp.com/post/', config)\n\t\t.then(res => res.json())\n\t\t.then(data => {\n\t\t\tconsole.log();\n\t\t\t\n\t\t\tthis.setState({\n\t\t\t\tposts: data.filteredPosts || [] \n\t\t\t})\n\t\t})\n  }\n\n  fetchUsername = () => {\n\tlet config = {\n\t\tmethod: \"GET\",\n\t\theaders: {\n\t\t\t'Content-type': 'Application/json',\n\t\t\tauthorization: `Bearer ${this.state.token}`\n\t\t}\n\t}\n\n\tfetch('https://reactcourseapi.herokuapp.com/user/name', config)\n\t\t.then(res => res.json())\n\t\t.then(data => {\n\t\t\tthis.setState({\n\t\t\t\tusername: data.username || ''\n\t\t\t})\n\n\t\t})\n  }\n\n  componentDidMount(){\n\tthis.fetchData();\n\tthis.fetchUsername();\n  }\n  \n  render(){\n    const postsComponents = this.state.posts.map((post, index) => {\n\t\t\n      return (<Post\n        key = {index}\n        name = {post.user}\n\t\tlikes = {post.likes}\n        title = {post.title}\n        text = {post.text}\n        image = {post.image}\n        onClick = {()=> this.likeHandler(index)}\n        />);\n      \n    });\n  \n    return (\n      <>\n\t  \t<NavFeed\n\t\t\t  username = {this.state.username}\n\t\t  />\n\t\t<div className = \"container\">\n\t\t\t<h1 className=\"display-3\">ReactFeed</h1>\n\t\t\t<h2>Recent posts</h2>\n\t\n\t\t\t<div className=\"posts\">\n\t\t\t{postsComponents}\n\t\t\t</div>\n\t\t</div>\n\t  </>\n    );\n  }\n}\n\nexport default ReactFeed;\n"]},"metadata":{},"sourceType":"module"}