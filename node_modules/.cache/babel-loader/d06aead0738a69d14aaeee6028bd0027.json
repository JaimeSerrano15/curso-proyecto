{"ast":null,"code":"var _jsxFileName = \"/home/jaime/Documents/React_Feed-ReactCourse2020/src/components/Register.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from \"react-router-dom\";\nconst initState = {\n  username: \"\",\n  email: \"\",\n  password: \"\",\n  errorFlag: false\n};\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n\n    this.submitHandler = event => {\n      event.preventDefault();\n      const user = {\n        username: this.state.username,\n        email: this.state.email,\n        password: this.state.password\n      };\n      let config = {\n        method: 'POST',\n        headers: {\n          'Content-type': 'Application/json'\n        },\n        body: JSON.stringify(user)\n      };\n      fetch('https://reactcourseapi.herokuapp.com/user/register', config).then(res => {\n        if (res.ok) {\n          res.json().then(data => {\n            localStorage.setItem('token', data.token);\n            this.props.history.push(\"/\");\n          });\n        } else {\n          this.setState({\n            errorFlag: true\n          });\n        }\n      });\n    };\n\n    this.changeHandler = event => {\n      this.setState({\n        [event.target.id]: event.target.value\n      });\n    };\n\n    localStorage.getItem('token') && this.props.history.push('/');\n    this.state = { ...initState\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"full-centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"jumbotron\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"display-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Registro\"), React.createElement(\"form\", {\n      onSubmit: this.submitHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Username:\", React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      id: \"username\",\n      onChange: this.changeHandler,\n      value: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Email:\", React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"email\",\n      id: \"email\",\n      onChange: this.changeHandler,\n      value: this.state.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Password:\", React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"password\",\n      id: \"password\",\n      onChange: this.changeHandler,\n      value: this.state.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"user-btns\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => {\n        this.props.history.push('/login');\n      },\n      type: \"button\",\n      className: \"btn btn-outline-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Sign in\"), React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Sign up\"))), this.state.errorFlag && React.createElement(\"div\", {\n      className: \"alert alert-dismissible alert-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Oh snap!\"), \" Hubo un error en el registro de usuario.\")));\n  }\n\n}\n\nexport default withRouter(Register);","map":{"version":3,"sources":["/home/jaime/Documents/React_Feed-ReactCourse2020/src/components/Register.js"],"names":["React","Component","withRouter","initState","username","email","password","errorFlag","Register","constructor","props","submitHandler","event","preventDefault","user","state","config","method","headers","body","JSON","stringify","fetch","then","res","ok","json","data","localStorage","setItem","token","history","push","setState","changeHandler","target","id","value","getItem","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {withRouter} from \"react-router-dom\"\n\nconst initState = {\n\tusername: \"\",\n\temail: \"\",\n\tpassword: \"\",\n\terrorFlag: false,\n}\n\nclass Register extends Component{\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tlocalStorage.getItem('token') && this.props.history.push('/');\n\n\t\tthis.state = {\n\t\t\t...initState,\n\t\t}\n\t}\n\n\tsubmitHandler = event => {\n\t\tevent.preventDefault();\n\n\t\tconst user = {\n\t\t\tusername: this.state.username,\n\t\t\temail: this.state.email,\n\t\t\tpassword: this.state.password,\n\t\t}\n\t\t\n\t\tlet config = {\n\t\t\tmethod : 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-type': 'Application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(user),\n\t\t};\n\n\t\tfetch('https://reactcourseapi.herokuapp.com/user/register', config)\n\t\t\t.then(res => {\n\t\t\t\tif( res.ok ){\n\t\t\t\t\tres.json()\n\t\t\t\t\t.then (data => {\n\t\t\t\t\t\tlocalStorage.setItem('token', data.token);\n\t\t\t\t\t\tthis.props.history.push(\"/\")\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\terrorFlag: true,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tchangeHandler = (event) => {\n\t\tthis.setState({\n\t\t\t[event.target.id]: event.target.value,\n\t\t})\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"full-centered\">\n\t\t\t\t<div className = \"jumbotron\">\n\t\t\t\t\t<h1 className=\"display-3\">Registro</h1>\n\t\n\t\t\t\t\t<form onSubmit={this.submitHandler}>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Username: \n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\t\t\ttype = \"text\" \n\t\t\t\t\t\t\t\t\tid = \"username\" \n\t\t\t\t\t\t\t\t\tonChange = {this.changeHandler}\n\t\t\t\t\t\t\t\t\tvalue = {this.state.username}/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\n\t\t\t\t\t\t\t<label>Email: \n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\ttype = \"email\" \n\t\t\t\t\t\t\t\t\tid = \"email\" \n\t\t\t\t\t\t\t\t\tonChange = {this.changeHandler}\n\t\t\t\t\t\t\t\t\tvalue = {this.state.email}/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\n\t\t\t\t\t\t\t<label>Password: \n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\t\t\ttype = \"password\" \n\t\t\t\t\t\t\t\t\tid = \"password\" \n\t\t\t\t\t\t\t\t\tonChange = {this.changeHandler}\n\t\t\t\t\t\t\t\t\tvalue = {this.state.password}/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"user-btns\">\n\t\t\t\t\t\t\t<button onClick={()=>{this.props.history.push('/login')}} type=\"button\" className=\"btn btn-outline-info\">Sign in</button>\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Sign up</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t\t{this.state.errorFlag && \n\t\t\t\t\t\t<div className=\"alert alert-dismissible alert-danger\">\n\t  \t\t\t\t\t\t<strong>Oh snap!</strong> Hubo un error en el registro de usuario.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withRouter(Register);"]},"metadata":{},"sourceType":"module"}