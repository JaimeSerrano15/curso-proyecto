{"ast":null,"code":"var _jsxFileName = \"/home/jaime/Documents/React_Feed-ReactCourse2020/src/components/Login.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from \"react-router-dom\";\nconst initState = {\n  username: \"\",\n  password: \"\",\n  errorFlag: false\n};\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.submitHandler = event => {\n      event.preventDefault();\n      const user = {\n        username: this.state.username,\n        password: this.state.password\n      };\n      let config = {\n        method: 'POST',\n        headers: {\n          'Content-type': 'Application/json'\n        },\n        body: JSON.stringify(user)\n      };\n      fetch('https://reactcourseapi.herokuapp.com/user/login', config).then(res => {\n        if (res.ok) {\n          res.json().then(data => {\n            localStorage.setItem('token', data.token);\n            this.props.history.push(\"/\");\n          });\n        } else {\n          this.setState({\n            errorFlag: true\n          });\n        }\n      });\n    };\n\n    this.changeHandler = event => {\n      this.setState({\n        [event.target.id]: event.target.value\n      });\n    };\n\n    localStorage.getItem('token') && this.props.history.push('/');\n    this.state = { ...initState\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"full-centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"jumbotron\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"display-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Inicio de sesi\\xF3n\"), React.createElement(\"form\", {\n      onSubmit: this.submitHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Username or email:\", React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      id: \"username\",\n      onChange: this.changeHandler,\n      value: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Password:\", React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"password\",\n      id: \"password\",\n      onChange: this.changeHandler,\n      value: this.state.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"user-btns\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Sign in\"), React.createElement(\"button\", {\n      onClick: () => {\n        this.props.history.push('/register');\n      },\n      type: \"button\",\n      className: \"btn btn-outline-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Sign up\"))), this.state.errorFlag && React.createElement(\"div\", {\n      className: \"alert alert-dismissible alert-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Oh snap!\"), \" Hubo un error en el inicio de sesi\\xF3n.\")));\n  }\n\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["/home/jaime/Documents/React_Feed-ReactCourse2020/src/components/Login.js"],"names":["React","Component","withRouter","initState","username","password","errorFlag","Login","constructor","props","submitHandler","event","preventDefault","user","state","config","method","headers","body","JSON","stringify","fetch","then","res","ok","json","data","localStorage","setItem","token","history","push","setState","changeHandler","target","id","value","getItem","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {withRouter} from \"react-router-dom\";\n\nconst initState = {\n\tusername: \"\",\n\tpassword: \"\",\n\terrorFlag: false,\n}\n\nclass Login extends Component{\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tlocalStorage.getItem('token') && this.props.history.push('/');\n\n\t\tthis.state = {\n\t\t\t...initState,\n\t\t}\n\t}\n\n\tsubmitHandler = event => {\n\t\tevent.preventDefault();\n\n\t\tconst user = {\n\t\t\tusername: this.state.username,\n\t\t\tpassword: this.state.password,\n\t\t}\n\t\t\n\t\tlet config = {\n\t\t\tmethod : 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-type': 'Application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(user),\n\t\t};\n\n\t\tfetch('https://reactcourseapi.herokuapp.com/user/login', config)\n\t\t\t.then(res => {\n\t\t\t\tif( res.ok ){\n\t\t\t\t\tres.json()\n\t\t\t\t\t.then (data => {\n\t\t\t\t\t\tlocalStorage.setItem('token', data.token);\n\t\t\t\t\t\tthis.props.history.push(\"/\")\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\terrorFlag: true,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tchangeHandler = (event) => {\n\t\tthis.setState({\n\t\t\t[event.target.id]: event.target.value,\n\t\t})\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className= \"full-centered\">\n\t\t\t\t<div className = \"jumbotron\">\n\t\t\t\t\t<h1 className=\"display-3\">Inicio de sesi√≥n</h1>\n\t\t\t\n\t\t\t\t\t<form onSubmit={this.submitHandler}>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label>Username or email: \n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\t\t\ttype = \"text\" \n\t\t\t\t\t\t\t\t\tid = \"username\" \n\t\t\t\t\t\t\t\t\tonChange = {this.changeHandler}\n\t\t\t\t\t\t\t\t\tvalue = {this.state.username}/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\n\t\t\t\t\t\t\t<label>Password: \n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\t\t\ttype = \"password\" \n\t\t\t\t\t\t\t\t\tid = \"password\" \n\t\t\t\t\t\t\t\t\tonChange = {this.changeHandler}\n\t\t\t\t\t\t\t\t\tvalue = {this.state.password}/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"user-btns\">\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Sign in</button>\n\t\t\t\t\t\t\t<button onClick={()=>{this.props.history.push('/register')}} type=\"button\" className=\"btn btn-outline-info\">Sign up</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t\t{this.state.errorFlag && \n\t\t\t\t\t\t<div className=\"alert alert-dismissible alert-danger\">\n\t\t\t  \t\t\t\t\t\t<strong>Oh snap!</strong> Hubo un error en el inicio de sesi√≥n.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withRouter(Login)"]},"metadata":{},"sourceType":"module"}